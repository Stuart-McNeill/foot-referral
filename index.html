<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Podiatry E-Referral Form</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f2f6fc;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: 50px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      padding: 40px;
    }
    h1 {
      text-align: center;
      color: #1f3b75;
      margin-bottom: 20px;
    }
    p.description {
      text-align: center;
      margin-bottom: 30px;
      color: #555;
    }
    .form-group {
      margin-bottom: 25px;
    }
    .form-group label {
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
      color: #333;
    }
    .form-group input[type="text"],
.form-group input[type="email"],
.form-group textarea {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 16px;
}

/* New styled dropdown */
.form-group select {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 16px;
  background: #f9fafc;
  appearance: none;              
  background-image: url("data:image/svg+xml;utf8,<svg fill='%231f3b75' height='20' viewBox='0 0 24 24' width='20' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 20px;
  cursor: pointer;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.form-group select:focus {
  outline: none;
  border-color: #1f3b75;
  box-shadow: 0 0 0 3px rgba(31,59,117,0.15);
  background-color: #fff;
}

    .form-group input[type="radio"] {
      margin-right: 5px;
    }
    .warning {
      color: red;
      font-weight: bold;
      margin-top: 10px;
      display: none;
    }
    .submit-button {
      display: block;
      margin: 40px auto 0;
      background: #1f3b75;
      color: #fff;
      border: none;
      padding: 14px 28px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    .submit-button:hover {
      background: #2d4e9e;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Podiatry E-Referral Form</h1>
    <p class="description">Please complete all sections accurately.</p>

    <p style="font-size: 18px; color: red; font-weight: bold;">
      If you have an open wound that is bleeding, oozing pus, or showing any signs of infection — 
      such as a foot that becomes swollen, hot to the touch, painful, or red (especially noticeable 
      in lighter skin tones) — or if you notice unusual colour changes like darkening, purple, grey, 
      pale, or blue toes, please contact the Podiatry Hub on 01698 753 753.
    </p>

    <form id="podiatryForm">

      <!-- Urgent mandatory questions -->
      <div class="form-group">
        <label>Do you require urgent medical attention?</label>
        <input type="radio" name="urgent" value="Yes"> Yes
        <input type="radio" name="urgent" value="No"> No
      </div>
      <div class="form-group">
        <label>Is your condition life-threatening?</label>
        <input type="radio" name="lifeThreat" value="Yes"> Yes
        <input type="radio" name="lifeThreat" value="No"> No
        <div id="urgentWarning" class="warning">
          Please seek urgent medical help. You cannot continue with this referral.
        </div>
      </div>

      <!-- Original Q1–Q8 -->
      <div class="form-group">
        <label>1. Have you been seen by NHS Lanarkshire Podiatry before?</label>
        <input type="radio" name="q1" value="Yes"> Yes
        <input type="radio" name="q1" value="No"> No
      </div>

      <div class="form-group">
        <label>2. If yes, is your referral regarding the same problem?</label>
        <input type="radio" name="q2" value="Yes"> Yes
        <input type="radio" name="q2" value="No"> No
      </div>

      <div class="form-group">
        <label>3. Full Name:</label>
        <input type="text" name="fullname">
      </div>

      <div class="form-group">
        <label>Date of Birth:</label>
        <input type="text" name="dob">
      </div>

      <div class="form-group">
        <label>Address:</label>
        <textarea name="address"></textarea>
      </div>

      <div class="form-group">
        <label>Postcode:</label>
        <input type="text" name="postcode">
      </div>

      <div class="form-group">
        <label>Registered GP Practice:</label>
        <input type="text" name="gpPractice">
      </div>

      <div class="form-group">
        <label>GP Name:</label>
        <input type="text" name="gpName">
      </div>

      <div class="form-group">
        <label>Preferred email address:</label>
        <input type="email" name="email">
      </div>

      <div class="form-group">
        <label>Preferred contact number:</label>
        <input type="text" name="phone">
      </div>

      <div class="form-group">
        <label>4. Do you require an interpreter?</label>
        <input type="radio" name="q4" value="Yes"> Yes
        <input type="radio" name="q4" value="No"> No
      </div>

      <div class="form-group hidden" id="interpreterGroup">
        <label>Which language, BSL or dialect?</label>
        <input type="text" name="interpreterLang">
      </div>

      <div class="form-group">
        <label>5. Are you able to travel out-with your local area?</label>
        <input type="radio" name="q5" value="Yes"> Yes
        <input type="radio" name="q5" value="No"> No
      </div>

      <div class="form-group">
        <label>Do you have any dates or days you are unavailable?</label>
        <input type="text" name="unavailableDates">
      </div>

      <div class="form-group">
        <label>6. Please describe your foot problem:</label>
        <textarea name="footProblem"></textarea>
      </div>

      <div class="form-group">
        <label>7. Are you under the care of any other specialist departments for this issue?</label>
        <input type="radio" name="q7" value="Yes"> Yes
        <input type="radio" name="q7" value="No"> No
      </div>

      <div class="form-group hidden" id="specialistGroup">
        <label>If yes, select all that apply:</label><br>
        <input type="checkbox" name="specialist" value="Rheumatology"> Rheumatology<br>
        <input type="checkbox" name="specialist" value="Fracture Clinic"> Fracture Clinic<br>
        <input type="checkbox" name="specialist" value="Orthopaedic"> Orthopaedic<br>
        <input type="checkbox" name="specialist" value="Diabetes"> Diabetes<br>
        <input type="checkbox" name="specialist" value="Vascular"> Vascular<br>
        <input type="checkbox" name="specialist" value="Cancer/Oncology"> Cancer/Oncology<br>
        <input type="checkbox" name="specialist" value="Dermatology"> Dermatology<br>
      </div>

      <div class="form-group">
        <label>8. Do you have any other medical conditions?</label>
        <textarea name="otherConditions"></textarea>
      </div>

      <!-- New dropdown questions -->
      <div class="form-group">
        <label>What is main reason for your referral?</label>
        <select name="reason">
          <option value="">Select…</option>
          <option>Pain in your muscles/joints</option>
          <option>A wound/ulcer</option>
          <option>Ingrowing toenail with broken skin</option>
          <option>Painful toenail</option>
          <option>Ingrowing toenail</option>
          <option>Problem with your lower leg/knee</option>
          <option>Hard skin / Corn</option>
          <option>Diabetes foot check/concern</option>
        </select>
      </div>

      <div class="form-group">
        <label>When did this start?</label>
        <select name="duration">
          <option value="">Select…</option>
          <option>Within 2 weeks</option>
          <option>2–6 weeks</option>
          <option>6–12 weeks</option>
          <option>Over 3 months</option>
        </select>
      </div>

      <div class="form-group">
        <label>Is the pain worsening quickly?</label>
        <select name="worsening">
          <option value="">Select…</option>
          <option>No</option>
          <option>Yes - rapidly over days</option>
          <option>Yes — gradually over weeks</option>
        </select>
      </div>

      <div class="form-group">
        <label>Do you have diabetes?</label>
        <select name="diabetes">
          <option value="">Select…</option>
          <option>No</option>
          <option>Yes — Type 1</option>
          <option>Yes — Type 2</option>
          <option>Yes — other</option>
        </select>
      </div>

      <div class="form-group">
        <label>Any current wound/ulcer?</label>
        <select name="currentUlcer">
          <option value="">Select…</option>
          <option>No</option>
          <option>Yes - being treated</option>
          <option>Yes - new</option>
        </select>
      </div>

      <div class="form-group">
        <label>Have you ever had a wound/ulcer before?</label>
        <select name="pastUlcer">
          <option value="">Select…</option>
          <option>No</option>
          <option>Yes</option>
        </select>
      </div>

      <button type="submit" class="submit-button">Submit & Download Answers</button>
    </form>
  </div>

  <script>
    const form = document.getElementById('podiatryForm');
    const urgentWarning = document.getElementById('urgentWarning');

    // Show/hide interpreter field
    document.querySelectorAll('input[name="q4"]').forEach(r => {
      r.addEventListener('change', () => {
        document.getElementById('interpreterGroup').style.display = r.value === 'Yes' ? 'block' : 'none';
      });
    });

    // Show/hide specialist group
    document.querySelectorAll('input[name="q7"]').forEach(r => {
      r.addEventListener('change', () => {
        document.getElementById('specialistGroup').style.display = r.value === 'Yes' ? 'block' : 'none';
      });
    });

    // Submission logic
    form.addEventListener('submit', function(e) {
      e.preventDefault();

      // Check urgent questions
      const urgent = form.querySelector('input[name="urgent"]:checked');
      const lifeThreat = form.querySelector('input[name="lifeThreat"]:checked');
      if (!urgent || !lifeThreat) {
        alert("Please answer the urgent safety questions.");
        return;
      }
      if (urgent.value === "Yes" || lifeThreat.value === "Yes") {
        urgentWarning.style.display = "block";
        return;
      }

      // Collect answers
      let answers = [];
      form.querySelectorAll("input, textarea, select").forEach(el => {
        if (el.type === "radio" && !el.checked) return;
        if (el.type === "checkbox" && !el.checked) return;
        if (el.value) {
          answers.push(`${el.name}: ${el.value}`);
        }
      });

      // Download as text
      const blob = new Blob([answers.join('\n')], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'Podiatry_Referral_Answers.txt';
      link.click();
    });
  </script>
</body>
</html>
